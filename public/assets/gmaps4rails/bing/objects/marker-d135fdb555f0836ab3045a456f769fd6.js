!function(){var t={}.hasOwnProperty,i=function(i,e){function o(){this.constructor=i}for(var n in e)t.call(e,n)&&(i[n]=e[n]);return o.prototype=e.prototype,i.prototype=new o,i.__super__=e.prototype,i};this.Gmaps4Rails.Bing.Marker=function(t){function e(t,i){var e,o;this.controller=i,o=this.createLatLng(t.lat,t.lng),e=this._createImageAnchorPosition([t.lat,t.lng]),this.serviceObject=null!=t.marker_picture?new Microsoft.Maps.Pushpin(o,{draggable:t.marker_draggable,anchor:e,icon:t.marker_picture,height:t.marker_height,text:t.marker_title,width:t.marker_width}):new Microsoft.Maps.Pushpin(o,{draggable:t.marker_draggable,anchor:e,text:t.marker_title}),this._addToMap(this.serviceObject)}return i(e,t),e.include(Gmaps4Rails.Interfaces.Marker),e.include(Gmaps4Rails.Bing.Shared),e.include(Gmaps4Rails.Marker.Instance),e.extend(Gmaps4Rails.Marker.Class),e.extend(Gmaps4Rails.Configuration),e.CONF={infobox:"description"},e.prototype.createInfoWindow=function(){return null!=this.description?(this.info_window="description"===this.controller.markers_conf.infobox?new Microsoft.Maps.Infobox(this.serviceObject.getLocation(),{description:this.description,visible:!1,showCloseButton:!0}):new Microsoft.Maps.Infobox(this.serviceObject.getLocation(),{htmlContent:this.description,visible:!1}),Microsoft.Maps.Events.addHandler(this.serviceObject,"click",this._openInfoWindow(this.controller,this.info_window)),this._addToMap(this.info_window)):void 0},e.prototype.isVisible=function(){return!0},e.prototype.clear=function(){return this._removeFromMap(this.serviceObject)},e.prototype.show=function(){return this.serviceObject.setOptions({visible:!0})},e.prototype.hide=function(){return this.serviceObject.setOptions({visible:!1})},e.prototype._openInfoWindow=function(t,i){return function(){return t.visibleInfoWindow&&t.visibleInfoWindow.setOptions({visible:!1}),i.setOptions({visible:!0}),t.visibleInfoWindow=i}},e.prototype._createImageAnchorPosition=function(t){return null==t?null:this.createPoint(t[0],t[1])},e}(Gmaps4Rails.Common)}.call(this);