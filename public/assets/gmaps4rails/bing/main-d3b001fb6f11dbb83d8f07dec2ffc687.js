!function(){Gmaps4Rails.Bing={},Gmaps4Rails.Bing.Shared={createPoint:function(t,e){return new Microsoft.Maps.Point(t,e)},createLatLng:function(t,e){return new Microsoft.Maps.Location(t,e)},createLatLngBounds:function(){},createSize:function(t,e){return new google.maps.Size(t,e)},_addToMap:function(t){return this.controller.getMapObject().entities.push(t)},_removeFromMap:function(t){return this.controller.getMapObject().entities.remove(t)}}}.call(this),function(){var t={}.hasOwnProperty,e=function(e,o){function n(){this.constructor=e}for(var i in o)t.call(o,i)&&(e[i]=o[i]);return n.prototype=o.prototype,e.prototype=new n,e.__super__=o.prototype,e};this.Gmaps4Rails.Bing.Map=function(t){function o(t,e){var o,n,i;this.controller=e,n=this.setConf(),this.options=this.mergeObjects(t,n),o={credentials:this.options.provider_key,mapTypeId:this._getMapType(this.options),center:this.createLatLng(this.options.center_latitude,this.options.center_longitude),zoom:this.options.zoom},i=this.mergeObjects(t.raw,o),this.serviceObject=new Microsoft.Maps.Map(document.getElementById(this.options.id),i)}return e(o,t),o.include(Gmaps4Rails.Interfaces.Map),o.include(Gmaps4Rails.Map),o.include(Gmaps4Rails.Bing.Shared),o.include(Gmaps4Rails.Configuration),o.prototype.CONF={type:"road"},o.prototype.extendBoundsWithMarkers=function(){var t,e,o,n,i;for(t=[],i=this.controller.markers,o=0,n=i.length;n>o;o++)e=i[o],t.push(e.serviceObject.getLocation());return this.boundsObject=Microsoft.Maps.LocationRect.fromLocations(t)},o.prototype.extendBoundsWithPolyline=function(){},o.prototype.extendBoundsWithPolygon=function(){},o.prototype.extendBoundsWithCircle=function(){},o.prototype.extendBound=function(){},o.prototype.adaptToBounds=function(){return this._fitBounds()},o.prototype.centerMapOnUser=function(t){return this.serviceObject.setView({center:t})},o.prototype._fitBounds=function(){return this.serviceObject.setView({bounds:this.boundsObject})},o.prototype._getMapType=function(t){switch(t.type){case"road":return Microsoft.Maps.MapTypeId.road;case"aerial":return Microsoft.Maps.MapTypeId.aerial;case"auto":return Microsoft.Maps.MapTypeId.auto;case"birdseye":return Microsoft.Maps.MapTypeId.birdseye;case"collinsBart":return Microsoft.Maps.MapTypeId.collinsBart;case"mercator":return Microsoft.Maps.MapTypeId.mercator;case"ordnanceSurvey":return Microsoft.Maps.MapTypeId.ordnanceSurvey;default:return Microsoft.Maps.MapTypeId.auto}},o}(Gmaps4Rails.Common)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,o){function n(){this.constructor=e}for(var i in o)t.call(o,i)&&(e[i]=o[i]);return n.prototype=o.prototype,e.prototype=new n,e.__super__=o.prototype,e};this.Gmaps4Rails.Bing.Marker=function(t){function o(t,e){var o,n;this.controller=e,n=this.createLatLng(t.lat,t.lng),o=this._createImageAnchorPosition([t.lat,t.lng]),this.serviceObject=null!=t.marker_picture?new Microsoft.Maps.Pushpin(n,{draggable:t.marker_draggable,anchor:o,icon:t.marker_picture,height:t.marker_height,text:t.marker_title,width:t.marker_width}):new Microsoft.Maps.Pushpin(n,{draggable:t.marker_draggable,anchor:o,text:t.marker_title}),this._addToMap(this.serviceObject)}return e(o,t),o.include(Gmaps4Rails.Interfaces.Marker),o.include(Gmaps4Rails.Bing.Shared),o.include(Gmaps4Rails.Marker.Instance),o.extend(Gmaps4Rails.Marker.Class),o.extend(Gmaps4Rails.Configuration),o.CONF={infobox:"description"},o.prototype.createInfoWindow=function(){return null!=this.description?(this.info_window="description"===this.controller.markers_conf.infobox?new Microsoft.Maps.Infobox(this.serviceObject.getLocation(),{description:this.description,visible:!1,showCloseButton:!0}):new Microsoft.Maps.Infobox(this.serviceObject.getLocation(),{htmlContent:this.description,visible:!1}),Microsoft.Maps.Events.addHandler(this.serviceObject,"click",this._openInfoWindow(this.controller,this.info_window)),this._addToMap(this.info_window)):void 0},o.prototype.isVisible=function(){return!0},o.prototype.clear=function(){return this._removeFromMap(this.serviceObject)},o.prototype.show=function(){return this.serviceObject.setOptions({visible:!0})},o.prototype.hide=function(){return this.serviceObject.setOptions({visible:!1})},o.prototype._openInfoWindow=function(t,e){return function(){return t.visibleInfoWindow&&t.visibleInfoWindow.setOptions({visible:!1}),e.setOptions({visible:!0}),t.visibleInfoWindow=e}},o.prototype._createImageAnchorPosition=function(t){return null==t?null:this.createPoint(t[0],t[1])},o}(Gmaps4Rails.Common)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,o){function n(){this.constructor=e}for(var i in o)t.call(o,i)&&(e[i]=o[i]);return n.prototype=o.prototype,e.prototype=new n,e.__super__=o.prototype,e};this.Gmaps4RailsBing=function(t){function o(){o.__super__.constructor.apply(this,arguments)}return e(o,t),o.include(Gmaps4Rails.Bing.Shared),o.prototype.getModule=function(){return Gmaps4Rails.Bing},o.prototype.createClusterer=function(){},o.prototype.clearClusterer=function(){},o.prototype.clearMarkers=function(){},o}(Gmaps4Rails.BaseController)}.call(this);