!function(){Gmaps4Rails.Google={},Gmaps4Rails.Google.Shared={createPoint:function(e,t){return new google.maps.Point(e,t)},createSize:function(e,t){return new google.maps.Size(e,t)},createLatLng:function(e,t){return new google.maps.LatLng(e,t)},createLatLngBounds:function(){return new google.maps.LatLngBounds},clear:function(){return this.serviceObject.setMap(null)},show:function(){return this.serviceObject.setVisible(!0)},hide:function(){return this.serviceObject.setVisible(!1)},isVisible:function(){return this.serviceObject.getVisible()}}}.call(this),function(){var e={}.hasOwnProperty,t=function(t,o){function r(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};this.Gmaps4Rails.Google.Circle=function(e){function o(e,t){var o,r;this.controller=t,e===this.controller.circles[0]&&(null!=e.strokeColor&&(this.controller.circles_conf.strokeColor=e.strokeColor),null!=e.strokeOpacity&&(this.controller.circles_conf.strokeOpacity=e.strokeOpacity),null!=e.strokeWeight&&(this.controller.circles_conf.strokeWeight=e.strokeWeight),null!=e.fillColor&&(this.controller.circles_conf.fillColor=e.fillColor),null!=e.fillOpacity&&(this.controller.circles_conf.fillOpacity=e.fillOpacity)),null!=e.lat&&null!=e.lng&&(o={center:this.createLatLng(e.lat,e.lng),strokeColor:e.strokeColor||this.controller.circles_conf.strokeColor,strokeOpacity:e.strokeOpacity||this.controller.circles_conf.strokeOpacity,strokeWeight:e.strokeWeight||this.controller.circles_conf.strokeWeight,fillOpacity:e.fillOpacity||this.controller.circles_conf.fillOpacity,fillColor:e.fillColor||this.controller.circles_conf.fillColor,clickable:e.clickable||this.controller.circles_conf.clickable,zIndex:e.zIndex||this.controller.circles_conf.zIndex,radius:e.radius},r=this.mergeObjects(this.controller.circles_conf.raw,o),this.serviceObject=new google.maps.Circle(r),this.serviceObject.setMap(this.controller.getMapObject()))}return t(o,e),o.include(Gmaps4Rails.Interfaces.Basic),o.include(Gmaps4Rails.Google.Shared),o.extend(Gmaps4Rails.Circle.Class),o.extend(Gmaps4Rails.Configuration),o}(Gmaps4Rails.Common)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,o){function r(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};this.Gmaps4Rails.Google.Kml=function(e){function o(e,t){var o;this.controller=t,this.options=e.options||{},this.options=this.mergeObjects(this.options,this.DEFAULT_CONF),o=new google.maps.KmlLayer(e.url,this.options),o.setMap(this.controller.getMapObject()),this.serviceObject=o}return t(o,e),o.include(Gmaps4Rails.Interfaces.Basic),o.include(Gmaps4Rails.Google.Shared),o.include(Gmaps4Rails.Kml.Instance),o}(Gmaps4Rails.Common)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,o){function r(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};Gmaps4Rails.Google.Map=function(e){function o(e,t){var o,r,n;this.controller=t,o=this.setConf(),this.options=this.mergeObjects(e,o),r={maxZoom:this.options.maxZoom,minZoom:this.options.minZoom,zoom:this.options.zoom,center:this.createLatLng(this.options.center_latitude,this.options.center_longitude),mapTypeId:google.maps.MapTypeId[this.options.type],mapTypeControl:this.options.mapTypeControl,disableDefaultUI:this.options.disableDefaultUI,disableDoubleClickZoom:this.options.disableDoubleClickZoom,draggable:this.options.draggable},n=this.mergeObjects(e.raw,r),this.serviceObject=new google.maps.Map(document.getElementById(this.options.id),n)}return t(o,e),o.include(Gmaps4Rails.Interfaces.Map),o.include(Gmaps4Rails.Map),o.include(Gmaps4Rails.Google.Shared),o.include(Gmaps4Rails.Configuration),o.prototype.CONF={disableDefaultUI:!1,disableDoubleClickZoom:!1,type:"ROADMAP",mapTypeControl:null},o.prototype.extendBoundsWithMarker=function(e){return this.boundsObject.extend(e.serviceObject.position)},o.prototype.extendBoundsWithPolyline=function(e){var t,o,r,n,i;for(o=e.serviceObject.latLngs.getArray()[0].getArray(),i=[],r=0,n=o.length;n>r;r++)t=o[r],i.push(this.boundsObject.extend(t));return i},o.prototype.extendBoundsWithPolygon=function(e){var t,o,r,n,i;for(o=e.serviceObject.latLngs.getArray()[0].getArray(),i=[],r=0,n=o.length;n>r;r++)t=o[r],i.push(this.boundsObject.extend(t));return i},o.prototype.extendBoundsWithCircle=function(e){return this.boundsObject.extend(e.serviceObject.getBounds().getNorthEast()),this.boundsObject.extend(e.serviceObject.getBounds().getSouthWest())},o.prototype.extendBound=function(e){return this.boundsObject.extend(this.createLatLng(e.lat,e.lng))},o.prototype.adaptToBounds=function(){var e;return this.options.auto_zoom?this.fitBounds():(e=this.boundsObject.getCenter(),this.options.center_latitude=e.lat(),this.options.center_longitude=e.lng(),this.serviceObject.setCenter(e))},o.prototype.fitBounds=function(){return this.boundsObject.isEmpty()?void 0:this.serviceObject.fitBounds(this.boundsObject)},o.prototype.centerMapOnUser=function(e){return this.serviceObject.setCenter(e)},o}(Gmaps4Rails.Common)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,o){function r(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};Gmaps4Rails.Google.Marker=function(e){function o(e,t){var o;this.controller=t,o=this.createLatLng(e.lat,e.lng),this._isBasicMarker(e)?this._createBasicMarker(o,e):null!=e.rich_marker?this._createRichMarker(o,e):this._createMarker(o,e)}return t(o,e),o.include(Gmaps4Rails.Interfaces.Marker),o.include(Gmaps4Rails.Google.Shared),o.include(Gmaps4Rails.Marker.Instance),o.extend(Gmaps4Rails.Marker.Class),o.extend(Gmaps4Rails.Configuration),o.CONF={clusterer_gridSize:50,clusterer_maxZoom:5,custom_cluster_pictures:null,custom_infowindow_class:null,raw:{}},o.prototype.createInfoWindow=function(){var e;return"function"==typeof this.controller.jsTemplate||null!=this.description?("function"==typeof this.controller.jsTemplate&&(this.description=this.controller.jsTemplate(this)),null!=this.controller.markers_conf.custom_infowindow_class?(e=document.createElement("div"),e.setAttribute("class",this.controller.markers_conf.custom_infowindow_class),e.innerHTML=this.description,this.infowindow=new InfoBox(this.infobox(e)),google.maps.event.addListener(this.serviceObject,"click",this._openInfowindow())):(this.infowindow=new google.maps.InfoWindow({content:this.description}),google.maps.event.addListener(this.serviceObject,"click",this._openInfowindow()))):void 0},o.prototype._createBasicMarker=function(e,t){var o,r;return o={position:e,map:this.getMap(),title:t.marker_title,draggable:t.marker_draggable,zIndex:t.zindex},r=this.mergeObjects(this.controller.markers_conf.raw,o),this.serviceObject=new google.maps.Marker(r)},o.prototype._createRichMarker=function(e,t){return this.serviceObject=new RichMarker({position:e,map:this.getMap(),draggable:t.marker_draggable,content:t.rich_marker,flat:null!=t.marker_anchor?t.marker_anchor[1]:!1,anchor:null!=t.marker_anchor?t.marker_anchor[0]:null,zIndex:t.zindex})},o.prototype._createMarker=function(e,t){var o,r,n,i,s,l;return r=this._createImageAnchorPosition(t.marker_anchor),s=this._createImageAnchorPosition(t.shadow_anchor),n=this._createOrRetrieveImage(t.marker_picture,t.marker_width,t.marker_height,r),l=this._createOrRetrieveImage(t.shadow_picture,t.shadow_width,t.shadow_height,s),o={position:e,map:this.getMap(),icon:n,title:t.marker_title,draggable:t.marker_draggable,shadow:l,zIndex:t.zindex},i=this.mergeObjects(this.controller.markers_conf.raw,o),this.serviceObject=new google.maps.Marker(i)},o.prototype._includeMarkerImage=function(e){var t,o,r,n,i;for(i=this.controller.markerImages,t=r=0,n=i.length;n>r;t=++r)if(o=i[t],o.url===e)return t;return!1},o.prototype._createOrRetrieveImage=function(e,t,o,r){var n,i;return"undefined"==typeof e||""===e||null===e?null:(i=this._includeMarkerImage(e))?"number"==typeof i?this.controller.markerImages[i]:!1:(n=this._createMarkerImage(e,this.createSize(t,o),null,r,null),this.controller.markerImages.push(n),n)},o.prototype._isBasicMarker=function(e){return null==e.marker_picture&&null==e.rich_marker},o.prototype._createMarkerImage=function(e,t,o,r,n){return new google.maps.MarkerImage(e,t,o,r,n)},o.prototype._createImageAnchorPosition=function(e){return null===e?null:this.createPoint(e[0],e[1])},o.prototype._openInfowindow=function(){var e;return e=this,function(){return e.controller._closeVisibleInfoWindow(),e.infowindow.open(e.getMap(),e.serviceObject),e.controller._setVisibleInfoWindow(e.infowindow)}},o}(Gmaps4Rails.Common)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,o){function r(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};this.Gmaps4Rails.Google.Polygon=function(e){function o(e,t){var o,r,n,i,s,l,c,a,p,u,h,f,g,m;for(this.controller=t,a=[],g=0,m=e.length;m>g;g++)l=e[g],i=this.createLatLng(l.lat,l.lng),a.push(i),l===e[0]&&(p=l.strokeColor||this.controller.polygons_conf.strokeColor,u=l.strokeOpacity||this.controller.polygons_conf.strokeOpacity,h=l.strokeWeight||this.controller.polygons_conf.strokeWeight,r=l.fillColor||this.controller.polygons_conf.fillColor,n=l.fillOpacity||this.controller.polygons_conf.fillOpacity,o=l.clickable||this.controller.polygons_conf.clickable,f=l.zIndex||this.controller.polygons_conf.zIndex);c={path:a,strokeColor:p,strokeOpacity:u,strokeWeight:h,clickable:o,zIndex:f},s=this.mergeObjects(t.polygons_conf.raw,c),this.serviceObject=new google.maps.Polygon(s),this.serviceObject.setMap(t.getMapObject())}return t(o,e),o.include(Gmaps4Rails.Interfaces.Basic),o.include(Gmaps4Rails.Google.Shared),o.extend(Gmaps4Rails.Polygon.Class),o.extend(Gmaps4Rails.Configuration),o}(Gmaps4Rails.Common)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,o){function r(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};this.Gmaps4Rails.Google.Polyline=function(e){function o(e,t){var o,r,n,i,s,l,c,a,p,u,h,f,g,m,d,_;for(a=[],g=0,d=e.length;d>g;g++)if(n=e[g],null!=n.coded_array)for(r=new google.maps.geometry.encoding.decodePath(n.coded_array),m=0,_=r.length;_>m;m++)l=r[m],a.push(l);else n===e[0]&&(p=n.strokeColor||t.polylines_conf.strokeColor,u=n.strokeOpacity||t.polylines_conf.strokeOpacity,h=n.strokeWeight||t.polylines_conf.strokeWeight,o=n.clickable||t.polylines_conf.clickable,f=n.zIndex||t.polylines_conf.zIndex,i=n.icons||t.polylines_conf.icons),null!=n.lat&&null!=n.lng&&a.push(this.createLatLng(n.lat,n.lng));c={path:a,strokeColor:p,strokeOpacity:u,strokeWeight:h,clickable:o,zIndex:f,icons:i},s=this.mergeObjects(t.polylines_conf.raw,c),this.serviceObject=new google.maps.Polyline(s),this.serviceObject.setMap(t.getMapObject())}return t(o,e),o.include(Gmaps4Rails.Interfaces.Basic),o.include(Gmaps4Rails.Google.Shared),o.extend(Gmaps4Rails.Polyline.Class),o.extend(Gmaps4Rails.Configuration),o}(Gmaps4Rails.Common)}.call(this),function(){var e={}.hasOwnProperty,t=function(t,o){function r(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};this.Gmaps4RailsGoogle=function(e){function o(){o.__super__.constructor.apply(this,arguments),this.markerImages=[]}return t(o,e),o.include(Gmaps4Rails.Google.Shared),o.prototype.getModule=function(){return Gmaps4Rails.Google},o.prototype.createClusterer=function(e){return new MarkerClusterer(this.getMapObject(),e,{maxZoom:this.markers_conf.clusterer_maxZoom,gridSize:this.markers_conf.clusterer_gridSize,styles:this.customClusterer()})},o.prototype.clearClusterer=function(){return this.markerClusterer.clearMarkers()},o.prototype.clusterize=function(){var e,t,o,r,n;if(this.markers_conf.do_clustering){for(null!=this.markerClusterer&&this.clearClusterer(),t=[],n=this.markers,o=0,r=n.length;r>o;o++)e=n[o],t.push(e.serviceObject);return this.markerClusterer=this.createClusterer(t)}},o.prototype._closeVisibleInfoWindow=function(){return null!=this.visibleInfowindow?this.visibleInfowindow.close():void 0},o.prototype._setVisibleInfoWindow=function(e){return this.visibleInfowindow=e},o}(Gmaps4Rails.BaseController)}.call(this),function(){}.call(this);